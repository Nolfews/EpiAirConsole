<nav class="nav">
  <div class="nav-inner">
    <div class="brand">EpiAirConsole</div>
    <div class="links" id="navLinks">
      <button data-target="/" class="guest-only">Home</button>
      <button data-target="/signin.html" class="guest-only">Sign in</button>
      <button data-target="/signup.html" class="guest-only">Sign up</button>
      <button data-target="/" class="auth-only" style="display: none;">Home</button>
      <button data-target="/profile.html" class="auth-only" style="display: none;">Profile</button>
      <button id="logoutBtn" class="auth-only" style="display: none;">Logout</button>
    </div>
  </div>
</nav>

<script>
(function() {
  const token = localStorage.getItem('token');
  const guestButtons = document.querySelectorAll('.guest-only');
  const authButtons = document.querySelectorAll('.auth-only');

  if (token) {
    guestButtons.forEach(btn => btn.style.display = 'none');
    authButtons.forEach(btn => btn.style.display = 'block');
  } else {
    guestButtons.forEach(btn => btn.style.display = 'block');
    authButtons.forEach(btn => btn.style.display = 'none');
  }

  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('token');
      window.location.href = '/signin.html';
    });
  }
})();
</script>

<script>
(function() {
  const token = localStorage.getItem('token');
  const guestButtons = document.querySelectorAll('.guest-only');
  const authButtons = document.querySelectorAll('.auth-only');

  if (token) {
    guestButtons.forEach(btn => btn.style.display = 'none');
    authButtons.forEach(btn => btn.style.display = 'block');
  } else {
    guestButtons.forEach(btn => btn.style.display = 'block');
    authButtons.forEach(btn => btn.style.display = 'none');
  }

  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('token');
      window.location.href = '/signin.html';
    });
  }
})();
</script>
